<!--
Copyright 2017 FileThis, Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->


<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../polymer/polymer.html">

<!--
`<ft-element-demo>`

An element that can be used for the demo fixture for FileThis elements. Has a slot for the element to be demoed and a side bar for configuration options.

@demo
-->
<dom-module id="ft-element-demo">

    <template>

        <style include="iron-flex iron-flex-alignment iron-positioning"></style>

        <div
                class="layout horizontal center"
                style="width:100%; height:100%; ">

            <!-- Config panel -->
            <div
                    id="configPanel"
                    class="layout vertical center center-justified"
                    style="height:100%; border-right:1px solid #DDD; margin:16px; ">

                <!-- Config slot -->
                <slot name="config"></slot>
            </div>

            <!-- Element panel -->
            <div
                    id="elementPanel"
                    class="layout vertical center"
                    style="width:100%; height:100%; ">

                <!-- Fake viewport size menu -->
                <paper-dropdown-menu label="Viewport" style="width:130px;">
                    <paper-listbox
                            class="dropdown-content"
                            slot="dropdown-content"
                            selected="{{_selectedViewportSizeIndex}}">
                        <template is="dom-repeat" items="[[_viewportSizes]]" as="viewportSize">
                            <paper-item>[[viewportSize.name]]</paper-item>
                        </template>
                    </paper-listbox>
                </paper-dropdown-menu>

                <!-- Element fake viewport -->
                <div
                        id="fakeViewport"
                        class="layout vertical center"
                        style="width:600px; height:500px; border:1px solid #DDD; margin:16px; ">

                    <!-- Element slot -->
                    <slot name="element"></slot>
                </div>

            </div>

        </div>


    </template>

    <script>
        Polymer({

            is: 'ft-element-demo',

            properties: {

                // Viewport sizes ----------------------------

                _viewportSizes:
                {
                    type: Array,
                    notify: true,
                    value: [
                        {
                            name: "Galaxy S5",
                            width: 360,
                            height: 640
                        },
                        {
                            name: "Nexus",
                            width: 412,
                            height: 732
                        },
                        {
                            name: "iPhone 5",
                            width: 320,
                            height: 568
                        },
                        {
                            name: "iPhone 6",
                            width: 375,
                            height: 667
                        },
                        {
                            name: "iPhone 6 Plus",
                            width: 414,
                            height: 736
                        },
                        {
                            name: "iPad",
                            width: 768,
                            height: 1024
                        },
                        {
                            name: "iPad Pro",
                            width: 1024,
                            height: 1366
                        },
                        {
                            name: "Responsive",
                            width: 1024,
                            height: 1366
                        }
                    ]
                },

                _selectedViewportSize:
                {
                    type: String,
                    notify: true,
                    value: "1.0.0",
                    observer: "_onSelectedViewportSizeChanged"
                },

                _selectedViewportSizeIndex:
                {
                    type: Number,
                    notify: true,
                    value: "0",
                    observer: "_onSelectedViewportSizeIndexChanged"
                }
            },

            _onSelectedViewportSizeChanged: function(to, from)
            {
                // Update the popup selection
                this._selectedViewportSizeIndex = this._mapViewportSizeToIndex(this._selectedViewportSize);

                // Update viewportSize used by the form
                this.$.userInteractionForm.viewportSize = this._selectedViewportSize;

                // Load examples for this viewportSize
                this._loadAllRequests();
            },

            _mapViewportSizeToIndex: function(viewportSize)
            {
                switch (viewportSize)
                {
                    case "1.0.0":
                        return 0;
                    case "2.0.0":
                        return 1;
                    default:
                        throw new Error("Unknown user interaction schema viewportSize: " + viewportSize);
                }
            },

            _onSelectedViewportSizeIndexChanged: function(to, from)
            {
                if (this._selectedViewportSizeIndex === null)
                {
                    this._selectedViewportSize = null;
                    return;
                }

                switch (this._selectedViewportSizeIndex)
                {
                    case 0:
                        this._selectedViewportSize = "1.0.0";
                        break;
                    case 1:
                        this._selectedViewportSize = "2.0.0";
                        break;
                    default:
                        throw new Error("Invalid viewportSize index: " + this._selectedViewportSizeIndex.toString());
                }
            }

        });
    </script>
</dom-module>
