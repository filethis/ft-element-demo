<!--
Copyright 2017 FileThis, Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->


<link rel="import" href="../ft-scrolling-behavior/ft-scrolling-behavior.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../polymer/polymer.html">

<!--
`<ft-element-demo>`

An element that can be used for the demo fixture for FileThis elements. Has a slot for the element to be demoed and a side bar for configuration options.

@demo
-->
<dom-module id="ft-element-demo">

    <template>

        <style include="iron-flex iron-flex-alignment iron-positioning"></style>

        <style>
            :host {
                display:block;
            }
        </style>

        <div
                class="layout horizontal"
                style="width:100%; height:100%; ">

            <!-- Config panel -->
            <div
                    id="configPanel"
                    class="layout vertical center"
                    style="height:100%; border-right:1px solid #DDD; ">

                <!-- Config slot -->
                <slot name="config"></slot>
            </div>

            <!-- Element panel -->
            <div
                    id="elementPanel"
                    class="layout vertical center"
                    style="width:100%; height:100%; padding:20px; ">

                <!-- Size menu -->
                <div
                        class="layout horizontal center">

                    <!-- Menu -->
                    <paper-dropdown-menu label="Viewport Size" style="width:130px; ">
                        <paper-listbox
                                class="dropdown-content"
                                slot="dropdown-content"
                                selected="{{selectedViewportSizeIndex}}">
                            <template is="dom-repeat" items="[[viewportSizes]]" as="viewportSize">
                                <paper-item>[[viewportSize.name]]</paper-item>
                            </template>
                        </paper-listbox>
                    </paper-dropdown-menu>

                    <div style="width:30px; "></div>

                    <div>
                        ([[viewportWidth]] x [[viewportHeight]])
                    </div>

                </div>

                <div style="height:20px; "></div>

                <!-- Fake viewport -->
                <div
                        id="fakeViewport"
                        class="layout vertical center"
                        style="border:1px solid black; overflow:auto; ">

                    <!-- Element slot -->
                    <slot name="element"></slot>
                </div>

            </div>

        </div>


    </template>

    <script>
        Polymer({

            is: 'ft-element-demo',

            behaviors: [
                FileThis.ScrollingBehavior
            ],

            properties: {

                viewportWidth:
                {
                    type: Number,
                    notify: true,
                    value: 1024
                },

                viewportHeight:
                {
                    type: Number,
                    notify: true,
                    value: 768
                },

                // Viewport sizes ----------------------------

                viewportSizes:
                {
                    type: Array,
                    notify: true,
                    value: [
                        {
                            name: "Galaxy S5",
                            width: 360,
                            height: 640
                        },
                        {
                            name: "Nexus",
                            width: 412,
                            height: 732
                        },
                        {
                            name: "iPhone 5",
                            width: 320,
                            height: 568
                        },
                        {
                            name: "iPhone 6",
                            width: 375,
                            height: 667
                        },
                        {
                            name: "iPhone 6 Plus",
                            width: 414,
                            height: 736
                        },
                        {
                            name: "iPad",
                            width: 768,
                            height: 1024
                        },
                        {
                            name: "iPad Pro",
                            width: 1024,
                            height: 1366
                        },
                        {
                            name: "Responsive",
                            width: 0,
                            height: 0
                        }
                    ]
                },

                selectedViewportSizeIndex:
                {
                    type: Number,
                    notify: true,
                    value: "0",
                    observer: "_onSelectedViewportSizeIndexChanged"
                }
            },

            ready: function()
            {
                this._manageScroller(this.$.fakeViewport)
            },

            _calculateScrollerWidth: function(scroller)
            {
                // Don't adjust width
                return -1;
            },

            _calculateScrollerHeight: function(scroller)
            {
                // Don't adjust height
                return -1;
            },

            _onSelectedViewportSizeIndexChanged: function(to, from)
            {
                var index = this.selectedViewportSizeIndex;

                if (index === null)
                    return;

                var viewportSize = this.viewportSizes[index];
                var viewportWidth = viewportSize.width;
                var viewportHeight = viewportSize.height;

                // Update the display of the size
                this.viewportWidth = viewportWidth;
                this.viewportHeight = viewportHeight;

                // Update the fake viewport size

                var fakeViewport = this.$.fakeViewport;

                var viewportWidthAsStyle;
                if (viewportWidth === 0)
                    viewportWidthAsStyle = "100%";
                else
                    viewportWidthAsStyle = viewportWidth + "px";
                fakeViewport.style.width = viewportWidthAsStyle;

                var viewportHeightAsStyle;
                if (viewportHeight === 0)
                    viewportHeightAsStyle = "100%";
                else
                    viewportHeightAsStyle = viewportHeight + "px";
                fakeViewport.style.height = viewportHeightAsStyle;
            }

        });
    </script>
</dom-module>
